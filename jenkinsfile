pipeline {
   agent any

   environment {

       def mvnHome = tool 'Maven3.8.6'
       def mvnCMD ="${mvnHome}/bin/mvn"

       registryName = 'edhriacr2022'
       registryUrl = 'edhriacr2022.azurecr.io'
       registryCredential = 'myACR'
       dockerImage = ''
    }

   tools {
          maven 'Maven3.8.6'
   }
    

   stages {
        stage('Verify Branch') {
         steps {
            echo "$GIT_BRANCH"
            }
         }
               
         stage('Build Stage') {
            steps {
                echo 'Building..'
                shell '${mvnHome}/bin/mvn clean install -f shopfront/pom.xml'
            }
        }
        stage('Test Stage') {
            steps {
                echo 'Testing..'
            }
        }
        stage('Deploy Stage') {
            steps {
                echo 'Deploying....'
            }
        }
    }
 }  


